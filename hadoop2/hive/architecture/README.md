# 하이브 아키텍처
##### 하이브 아키텍처는 다음과 같다.
![하이브 아키텍처](https://github.com/googolhkl/TIL/blob/master/hadoop2/hive/source/HiveArchitecture.png)

##### 우선 하이브의 클라이언트는 커맨드 라인 인터페이스(Command Line Interface,CLI), 하이브 서버, 웹 인터페이스로 구성된다. 하이브 서버의 경우 JDBC, ODBC, 쓰리프트로 개발된 클라이언트가 하이브 서비스를 이용할 수 있게 쓰리프트 서비스를 제공한다. 참고로 여기선 우리는 하이브에서 제공하는 CLI를 이용해 하이브QL을 테스트한다.
<br />

##### 또한 하이브는 메타스토어(Metastore)라는 저장소를 만들어 하둡에서 처리된 메타데이터의 구조를 메타스토어에 저장한다. 기본적으로는 경량 데이터베이스인 아파치 더비를 로컬 클라이언트에 설치해 메타스토어를 구성한다. 단순한 테스트 용도로는 아파치 더비를 사용해도 문제가 되지 않는다.
<br />

##### 하지만 여러 명의 사용자가 동일한 하둡 클러스터에서 하이브로 작업할 경우에는 아파치 더비가 아닌 RDMS로 메타스토어를 구성해야 한다. 각 사용자의 로컬에 메타스토어가 생성된다면 메타데이터가 전혀 관리되지 않을 것이기 때문이다. 참고로 하이브는 오라클,MySQL 등 JDBC를 지원하는 모든 데이터베이스를 이용해 메타스토어를 구축할 수 있다.
<br />

##### 마지막으로 드라이버는 사용자가 입력한 하이브QL문을 해석한다. 하둡과 연결되어 하이브QL문을 실행하고, 하이브QL은 하이브QL문의 실행 계획을 작성하고, 최적화 작업까지 함께 수행한다.

