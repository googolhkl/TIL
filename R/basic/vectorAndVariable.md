# 데이터 개념 이해하기
##### 아래는 데이터 용어에 대한 설명이다.
- 이산형 데이터
 * 1, 5, 100 처럼 정수로 구성된 데이터
- 연속형 데이터
 * 3.14, 180.1 처럼 연속적인 데이터
- 명목형 데이터
 * 문자로 나타낸 카테고리적 데이터다. 예를 들면, 혈액형(A,AB,B,O)가 있다.
- 순서형 데이터
 * 명목형 데이터와 비슷한데 순서가 있다는 점만 다르다. 학점 A+, A-, B+, B-, C+, C-, D+, D-, F와 같은 것이다.

##### R에서 하나의 데이터도 벡터라고 했다.
##### 그럼 다양한 종류의 벡터를 만드는 방법을 살펴보자.

## 1. 여러 종류 벡터 만들기
### 1.1 벡터 만들기
```
> a1 <- c(5,4,3,2,1)
> a1
[1] 5 4 3 2 1
```

##### c() 함수는 벡터를 만드는 함수다. 구분은 `,`로 한다. 이 벡터는 숫자이면서 정수니까 `integer`이지 않을까? 확인해보자.

```
> is(a1)
[1] "numeric" "vector"
```

##### 뭔가 이상하다.  `integer`인줄 알았는데 `numeric`이다.
##### R에서는 정확하게 알려주지 않4ㅡ면 더 큰 개념으로 정의하다. `integer`는 `numeric`에 속해있다. 수학에서도 정수는 실수에 포함되어 있지 않은가? 
##### 진짜 정수로만 사용하려면 R에게 다음과 같이 알려줘야 한다.

```
> a1 <- c(5L,4L,3L,2L,1L)
```

##### 새로 만들지 않고 기존에 것에서 변환하려면 다음과 같이 한다.

```
> a1 <- as.integer(a1)
> is(a1)
[1] "integer"             "numeric"             "vector"             
[4] "data.frameRowLabels"
```

##### `integer`는 `numeric`에 속해있고 `numeric`은 `vector`에 속해있다.
##### 만약 정수 연산을 하려면 `integer`로 바꿔주는 것이 계산이 빠르다.
<br />

##### 연속형 변수는 그냥 실수값을 넣으면 된다.

```
> b <- c(3.14, 5.16, 1.23)
> b
[1] 3.14 5.16 1.23
> is(b)
[1] "numeric" "vector" 
```
<br />

### 1.2 문자열 벡터 만들기
```
> a2 <- c("짬뽕", "짜장면", "짬뽕", "짬뽕", "짜장면")
> a2
[1] "짬뽕"   "짜장면" "짬뽕"   "짬뽕"   "짜장면"
```
##### 문자열 벡터도 c()함수를 이용해서 만든다. 다만 따옴표로 데이터를 감싼다.
<br />

### 1.3 명목형 변수 만들기
```
> a2 <- as.factor(a2)
> a2
[1] 짬뽕   짜장면 짬뽕   짬뽕   짜장면
Levels: 짜장면 짬뽕
```
##### 안보이던 `Levels`가 보인다. 명목형 변수를 여기에 표시해두는 것이다. `factor`가 맞는지 확인해보자.

```
> is(a2)
[1] "factor"              "integer"             "oldClass"           
[4] "numeric"             "vector"              "data.frameRowLabels"
```

##### `factor`인 것을 확인할 수 있다. 
##### `integer`가 있는 이유는 명목형 변수 {짜장면,짬뽕}은 {1,2}로 바꿔서 사용하기도 하기 때문이다.
<br />



### 1.4 순서형 변수 만들기
```
> a2 <- factor(a2, ordered =T)
> a2
[1] 짬뽕   짜장면 짬뽕   짬뽕   짜장면
Levels: 짜장면 < 짬뽕
```
##### ordered 인자의 논리값에 따라 오름차순, 내름차순으로 순서를 정할 수 있다.
##### 우리는 as가 아니라 factor()함수를 사용해서 순서형 변수를 만들었다. 이렇게 변환이 아니라 직접 변수를 새로 만들수 있다.

```
> a3 <- factor(c("남", "여", "여", "남"), levels=c("남","여","소녀"))
> a3
[1] 남 여 여 남
Levels: 남 여 소녀
```
##### 이거 또한 ordered 인자를 추가해 순서형으로도 만들 수 있다.



## 2. 여러 개 벡터를 만들어 데이터프레임(dataframe)을 만들기
##### 여러 벡터가 있고 그것을 합쳐서 `데이터프레임`을 만드는 방법을 살펴보겠다.

#####1. 벡터를 만든다.

```
> a1 <- c(5,4,3,2,1)
> a1
[1] 5 4 3 2 1
```

#####2. 문자열 벡터를 만든다.

```
> a2 <- c("짜장면", "짬뽕", "탕수육", "볶음밥","양파")
> a2
[1] "짜장면" "짬뽕"   "탕수육" "볶음밥" "양파" 
```

#####3. 연속형 변수를 벡터로 만든다.
```
> a3 <- c(3.14, 6.21, 2.35, 9.42, 8.62)
> a3
[1] 3.14 6.21 2.35 9.42 8.62
```

#####4. 만든 벡터들로 데이터프레임(dataframe)을 만든다.
```
> DF <- data.frame(a1,a2,a3)
> DF
  a1     a2   a3
  1  5 짜장면 3.14
  2  4   짬뽕 6.21
  3  3 탕수육 2.35
  4  2 볶음밥 9.42
  5  1   양파 8.62
```

##### 데이터프레임(dataframe)을 만들때 주의할 점은 벡터들의 길이가 반드시 같아야 한다는 점이다.
##### 위에서 완성된 데이터프레임의 변수명이 a1,a2,a3라 마음에 들지 않는데, 우리가 원하는 변수명을 만드는 방법을 알아보자.
```
> DF <- data.frame(count=a1, food=a2, meanCount=a3)
> DF
  count   food meanCount
  1     5 짜장면      3.14
  2     4   짬뽕      6.21
  3     3 탕수육      2.35
  4     2 볶음밥      9.42
  5     1   양파      8.62
```

## 3. 외부 데이터 가져오기와 변수 선택하기
##### R은 분석용으로 외부에서 잘 정리된 표를 데이터로 가져온다. 가져오는 표는 데이터프레임(dataframe)에 저장된다. 이번엔 외부에서 가져오는 데이터표를 데이터프레임(dataframe)에 넣어 다루는 방법을 설명하겠다.

##### 1. 데이터 파일을 불러온다.
```
> DF <- read.csv("/Users/googolhkl/Downloads/test.csv")
> DF
  번호                     사업장명
  1    1                       마초네
  2    2               쑈웨이오리목점
  3    3 아치곤크메(Ahchhy Kon Khmer)
  (중략)
```

##### 이렇게 외부에서 테이블로 정리된 데이터를 가져오면 R에서는 data.frame객체에 저장된다. data.frame은 열과 행으로 이루어져 있다. 앞서 설명했듯이 이 데이터프레임은 열이 모여 만들어진다. 그리고 하나의 열은 하나의 변수다. 위의 데이터프레임도 벡터가 모여 만들어졌는지 확인해보자.
#####2. 변수가 벡터인지 확인하기
```
> is.vector(DF$인허가일자)
[1] TRUE
```



##### 데이터프레임에 저장된 데이터의 구조를 파악해보자.
#####3. 데이터프레임(dataframe) 구조 파악하기
```
> str(DF)
'data.frame':   6 obs. of  21 variables:
 $ 번호            : int  1 2 3 4 5 6
 $ 사업장명        : Factor w/ 6 levels "마초네","쑈웨이오리목점",..: 1 2 3 4 5 6
 $ 소재지전체주소  : Factor w/ 6 levels "경기도 수원시 팔달구 고등동 58-11번지",..: 6 1 3 2 5 4
 $ 도로명전체주소  : Factor w/ 6 levels "경기도 수원시 팔달구 고매로 29, 1층 (고등동)",..: 6 1 3 2 5 4
 $ 인허가일자      : int  20150529 20150529 20120920 20150528 20150528 20150512
 $ 영업상태명      : Factor w/ 1 level "운영중": 1 1 1 1 1 1
 $ 폐업일자        : logi  NA NA NA NA NA NA
 $ 휴업시작일자    : logi  NA NA NA NA NA NA
 $ 휴업종료일자    : logi  NA NA NA NA NA NA
 $ 재개업일자      : logi  NA NA NA NA NA NA
 $ 소재지면적      : logi  NA NA NA NA NA NA
 $ 소재지우편번호  : logi  NA NA NA NA NA NA
 $ 건물소유구분명  : logi  NA NA NA NA NA NA
 $ 급수시설구분명  : Factor w/ 2 levels "","상수도전용": 1 1 2 2 2 2
 $ 년도            : int  2015 2015 2012 2015 2015 2015
 $ 다중이용업소여부: Factor w/ 1 level "N": 1 1 1 1 1 1
 $ 시설총규모      : num  49.1 0 59 49.6 190.1 ...
 $ 위생업종명      : Factor w/ 1 level "일반음식점": 1 1 1 1 1 1
 $ 위생업태명      : Factor w/ 1 level "외국음식전문점(인도,태국등)": 1 1 1 1 1 1
 $ 총종업원수      : logi  NA NA NA NA NA NA
 $ X               : logi  NA NA NA NA NA NA
```

##### 4. 변수 선택하기
```
> DF$번호
[1] 1 2 3 4 5 6
```
##### 데이터프레임 객체에 `$`를 붙이고 불러오고 싶은 변수의 이름을 적어주면 된다.
##### 이렇게 선택한 벡터는 바로 함수에 넣어 사용할 수도 있다. 평균을 구하는 함수를 이용해보자.

```
> mean(DF$번호)
[1] 3.5
```

##### 다른 객체에 저장할 수도 있다.
```
> number <- DF$번호
> number
[1] 1 2 3 4 5 6
```

##### `번호`변수가 1번째 열에 있으니 다음과 같이 적을 수 있다.
```
> DF[[1]]
[1] 1 2 3 4 5 6
```

##### 특이한 것은 []안에 []이 또 있다. 한 개를 하면 어떻게 될까?
```
> DF[1]
  번호
1    1
2    2
3    3
4    4
5    5
6    6
```

##### 변수명이랑 라인넘버 까지 나오는데 정확히 뭐가 다른지 모르겠다. class()로 차이를 살펴보자.
```
> class(DF[1])
[1] "data.frame"
> class(DF[[1]])
[1] "integer"
```
##### 하나는 벡터이고 하나는 데이터프레임이라는 걸 알 수 있다. [[]]로 값 자체를 가져온다는 사실을 기억하고 있자.

## 4. 여러 개 변수 선택하기
